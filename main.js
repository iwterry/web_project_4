(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputElementSelector=e.inputSelector,this._inputErrorMsgElementSelectorPrefix=e.inputErrorMsgSelectorPrefix,this._disabledBtnClassName=e.disabledButtonClass,this._inputErrorClassName=e.inputErrorClass,this._errorMsgVisibilityClassName=e.errorMsgVisibilityClass,this._formElement=n,this._inputElements=Array.from(this._formElement.querySelectorAll(this._inputElementSelector)),this._submitBtnElement=this._formElement.querySelector(e.submitBtnSelector)}var n,r;return n=t,(r=[{key:"_getErrorMessageElementForInvalidInput",value:function(e){return this._formElement.querySelector("".concat(this._inputErrorMsgElementSelectorPrefix).concat(e.id))}},{key:"_showInputError",value:function(e,t){var n=this._getErrorMessageElementForInvalidInput(e);e.classList.add(this._inputErrorClassName),n.classList.add(this._errorMsgVisibilityClassName),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._getErrorMessageElementForInvalidInput(e);e.classList.remove(this._inputErrorClassName),t.classList.remove(this._errorMsgVisibilityClassName),t.textContent=""}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=e.validationMessage;this._showInputError(e,t)}}},{key:"_hasSomeInvalidInput",value:function(){return!this._inputElements.every((function(e){return e.validity.valid}))}},{key:"_enableButton",value:function(){this._submitBtnElement.classList.remove(this._disabledBtnClassName),this._submitBtnElement.disabled=!1}},{key:"_disableButton",value:function(){this._submitBtnElement.classList.add(this._disabledBtnClassName),this._submitBtnElement.disabled=!0}},{key:"_toggleButtonState",value:function(){this._hasSomeInvalidInput()?this._disableButton():this._enableButton()}},{key:"_handleInputValidation",value:function(e){this._checkInputValidity(e),this._toggleButtonState()}},{key:"_addEventListener",value:function(e){var t=this;e.addEventListener("input",(function(){return t._handleInputValidation(e)}))}},{key:"_hideAllInputErrors",value:function(){var e=this;this._inputElements.forEach((function(t){return e._hideInputError(t)}))}},{key:"showNoErrorsButDisableSubmitBtnWhenHasAnError",value:function(){this._hideAllInputErrors(),this._hasSomeInvalidInput()?this._disableButton():this._enableButton()}},{key:"enableValidation",value:function(){var e=this;this._inputElements.forEach((function(t){return e._addEventListener(t)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=this,i=n.popupSelector,o=n.openedPopupClassName,a=n.clickedToClosePopupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t).closest(i),this._openedPopupClassName=o,this._clickedToClosePopupSelector=a,this._handleEscClose=function(e){"Escape"===e.key&&r._popupElement.classList.contains(r._openedPopupClassName)&&r.close()}}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupElement.classList.add(this._openedPopupClassName),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove(this._openedPopupClassName),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.querySelector(this._clickedToClosePopupSelector).addEventListener("click",(function(){return e.close()})),this._popupElement.addEventListener("click",(function(t){t.target===e._popupElement&&e.close()}))}}])&&n(t.prototype,r),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,i,c=(r=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(r);if(i){var n=u(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function m(e,t,n){var r,i=t.handleFormSubmit,o=t.performActionPriorToFormOpening,a=void 0===o?null:o,l=n.popupSelector,s=n.openedPopupClassName,u=n.clickedToClosePopupSelector,p=n.inputSelector,f=n.submitBtnSelector,d=n.disabledSubmitBtnClassName;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(r=c.call(this,'form[name="'.concat(e,'"'),{popupSelector:l,openedPopupClassName:s,clickedToClosePopupSelector:u}))._formElement=document.forms[e],r._inputElements=Array.from(r._formElement.querySelectorAll(p)),r._submitBtnElement=r._formElement.querySelector(f),r._disabledSubmitBtnClassName=d,r._handleFormSubmit=i,r._performActionPriorToFormOpening=a,r}return t=m,(n=[{key:"getInputValues",value:function(){return this._inputElements.reduce((function(e,t){return e[t.name]=t.value,e}),{})}},{key:"setInputValues",value:function(e){this._inputElements.forEach((function(t){e.hasOwnProperty(t.name)&&(t.value=e[t.name])}))}},{key:"_disableSubmitBtn",value:function(){this._submitBtnElement.disabled=!0,this._submitBtnElement.classList.add(this._disabledSubmitBtnClassName)}},{key:"_enableSubmitBtn",value:function(){this._submitBtnElement.disabled=!1,this._submitBtnElement.classList.remove(this._disabledSubmitBtnClassName)}},{key:"getSubmitBtnText",value:function(){return this._submitBtnElement.textContent}},{key:"setSubmitBtnText",value:function(e){this._submitBtnElement.textContent=e}},{key:"setEventListeners",value:function(){var e=this;a(u(m.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){e._handleFormSubmit(t,{enableSubmitBtn:function(){return e._enableSubmitBtn()},disableSubmitBtn:function(){return e._disableSubmitBtn()}})}))}},{key:"open",value:function(){this._enableSubmitBtn(),"function"==typeof this._performActionPriorToFormOpening&&this._performActionPriorToFormOpening(),a(u(m.prototype),"open",this).call(this)}},{key:"close",value:function(){a(u(m.prototype),"close",this).call(this),this._disableSubmitBtn(),this._formElement.reset()}}])&&o(t.prototype,n),m}(r);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(i){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e,t){var n,r=t.popupSelector,i=t.openedPopupClassName,l=t.clickedToClosePopupSelector,s=t.imageTitleSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e,{popupSelector:r,openedPopupClassName:i,clickedToClosePopupSelector:l}))._imageElement=document.querySelector(e),n._imageTitleElement=document.querySelector(s),n}return t=a,(n=[{key:"open",value:function(e,t){this._imageElement.src=e,this._imageElement.alt=t,this._imageTitleElement.textContent=t,f(v(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),a}(r);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl="https://around.nomoreparties.co/v1/group-8",this._headers=n}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return this._fetchData({relativePathFromBase:"cards"})}},{key:"getUserProfile",value:function(){return this._fetchData({relativePathFromBase:"users/me"})}},{key:"createCard",value:function(e,t){return this._fetchData({relativePathFromBase:"cards",method:"POST",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})})}},{key:"updateUserProfile",value:function(e,t){return this._fetchData({relativePathFromBase:"users/me",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})})}},{key:"deleteCard",value:function(e){return this._fetchData({relativePathFromBase:"cards/".concat(e),method:"DELETE"})}},{key:"updateUserAvatar",value:function(e){return this._fetchData({relativePathFromBase:"users/me/avatar",method:"PATCH",additionalHeaderProps:{"Content-Type":"application/json"},body:JSON.stringify({avatar:e})})}},{key:"updateCardLikes",value:function(e,t){return this._fetchData({relativePathFromBase:"cards/likes/".concat(e),method:t?"PUT":"DELETE"})}},{key:"_fetchData",value:function(e){var t=e.relativePathFromBase,n=e.method,r=void 0===n?"GET":n,i=e.additionalHeaderProps,o=void 0===i?{}:i,a=e.body,l=void 0===a?null:a,s={method:r,headers:y(y({},this._headers),o)};null!==l&&(s.body=l);var u="".concat(this._baseUrl,"/").concat(t);return fetch(u,s).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}}])&&E(t.prototype,n),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){var r=t.nameOfUserSelector,i=t.descriptionAboutUserSelector,o=t.avatarForUserSelector,a=t.avatarOverlaySelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameOfUserElement=document.querySelector(r),this._descriptionAboutUserElement=document.querySelector(i),this._avatarImgElement=document.querySelector(o),this._avatarOverlayElement=document.querySelector(a),this._id=null,this._handleAvatarOverlayClick=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameOfUserElement.textContent,description:this._descriptionAboutUserElement.textContent,avatarLink:this._avatarImgElement,id:this._id}}},{key:"setUserInfo",value:function(e){var t=e.name,n=void 0===t?null:t,r=e.description,i=void 0===r?null:r,o=e.avatarLink,a=void 0===o?null:o,l=e.id,s=void 0===l?null:l;null!=n&&(this._nameOfUserElement.textContent=n),null!=i&&(this._descriptionAboutUserElement.textContent=i),null!=a&&(this._avatarImgElement.src=a),null!=s&&(this._id=s)}},{key:"setEventListeners",value:function(){this._avatarOverlayElement.addEventListener("click",this._handleAvatarOverlayClick)}}])&&g(t.prototype,n),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&B(t.prototype,n),e}();function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=document.querySelector(".profile__edit-btn"),j=document.querySelector(".profile__add-btn"),N="Saving...",T=".project-form__input",A=".project-form__submit-btn",D="project-form__submit-btn_disabled",F={popupSelector:".overlay",openedPopupClassName:"overlay_opened",clickedToClosePopupSelector:".overlay__close-btn"},U=L(L({},F),{},{imageTitleSelector:".image-popup__title"}),x=L(L({},F),{},{inputSelector:T,submitBtnSelector:A,disabledSubmitBtnClassName:D}),q={inputSelector:T,inputErrorMsgSelectorPrefix:".project-form__input-error_field_",submitBtnSelector:A,disabledButtonClass:D,inputErrorClass:"project-form__input_type_error",errorMsgVisibilityClass:"project-form__input-error_active"},V={cardSelector:".location",imageSelector:".location__image",likeBtnSelector:".location__like-btn",numLikesSelector:".location__num-likes",deleteBtnSelector:".location__delete-btn",titleSelector:".location__name",deleteBtnActiveClassName:"location__delete-btn_active",likeBtnActiveClassName:"location__like-btn_active"};function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W,M,H,J,z,G,K,Q,X,Y,Z,$=function(){function e(t,n,r){var i=n.cardInfo,o=i.name,a=i.link,l=i.id,s=i.initialNumLikes,u=void 0===s?0:s,c=i.isLiked,m=void 0!==c&&c,p=i.isOwner,f=void 0===p||p,d=n.css,h=d.cardSelector,v=d.imageSelector,_=d.titleSelector,b=d.likeBtnSelector,y=d.deleteBtnSelector,k=d.numLikesSelector,E=d.likeBtnActiveClassName,S=d.deleteBtnActiveClassName,g=r.handleCardClick,C=r.getUpdatedNumLikesFromApiAfterUserAction,B=r.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=o,this._imageLink=a,this._initialNumLikes=u,this._isLiked=m,this._isOwner=f,this._id=l,this._handleCardClick=g,this._getUpdatedNumLikesFromApiAfterUserAction=C,this._handleDeleteCard=B,this._templateSelector=t,this._css={cardSelector:h,imageSelector:v,titleSelector:_,likeBtnSelector:b,deleteBtnSelector:y,numLikesSelector:k,likeBtnActiveClassName:E,deleteBtnActiveClassName:S},this._domElements={card:null,image:null,likeBtn:null,numLikes:null,deleteBtn:null,title:null},null==e._cards&&(e._cards=new Map),e._save(this)}var t,n,r;return t=e,r=[{key:"_save",value:function(e){this._cards.set(e._id,e)}},{key:"delete",value:function(e){var t=this._cards;t.has(e)&&(t.get(e)._deleteCard(),t.delete(e))}}],(n=[{key:"_initDomElements",value:function(){var e=this._getPlainCardElement(),t=this._css,n=this._domElements;n.card=e,n.image=e.querySelector(t.imageSelector),n.likeBtn=e.querySelector(t.likeBtnSelector),n.numLikes=e.querySelector(t.numLikesSelector),n.deleteBtn=e.querySelector(t.deleteBtnSelector),n.title=e.querySelector(t.titleSelector)}},{key:"_getPlainCardElement",value:function(){return document.querySelector(this._templateSelector).content.querySelector(this._css.cardSelector).cloneNode(!0)}},{key:"_fillDomElementsWithData",value:function(){var e=this._domElements;e.title.textContent=this._title,e.image.src=this._imageLink,e.image.alt=this._title,this._isOwner&&e.deleteBtn.classList.add(this._css.deleteBtnActiveClassName),this._updateLikeInfoDom(this._initialNumLikes)}},{key:"_deleteCard",value:function(){this._domElements.card.remove()}},{key:"_updateNumLikes",value:function(e){this._domElements.numLikes.textContent=e}},{key:"_likingCard",value:function(e){this._domElements.likeBtn.classList.add(this._css.likeBtnActiveClassName),this._updateNumLikes(e)}},{key:"_unlikingCard",value:function(e){this._domElements.likeBtn.classList.remove(this._css.likeBtnActiveClassName),this._updateNumLikes(e)}},{key:"_updateLikeInfoDom",value:function(e){this._isLiked?this._likingCard(e):this._unlikingCard(e)}},{key:"_handleClickedLikeBtn",value:function(){var e=this;this._getUpdatedNumLikesFromApiAfterUserAction(this._id,!this._isLiked).then((function(t){var n=t.numLikes;"number"==typeof n&&(e._isLiked=!e._isLiked,e._updateLikeInfoDom(n))}))}},{key:"_addEventListenersToDomElements",value:function(){var e=this,t=this._domElements;t.deleteBtn.addEventListener("click",(function(){return e._handleDeleteCard(e._id)})),t.likeBtn.addEventListener("click",(function(){return e._handleClickedLikeBtn()})),t.image.addEventListener("click",this._handleCardClick)}},{key:"generateNewCardElement",value:function(){return this._initDomElements(),this._fillDomElementsWithData(),this._addEventListenersToDomElements(),this._domElements.card}}])&&R(t.prototype,n),r&&R(t,r),e}();function ee(e){console.log("Error: ".concat(e))}function te(e,t){var n=t.popupWithImage,r=t.popupWithConfirmationPromptForm,i=t.api;return new $("#location",{cardInfo:e,css:V},{handleCardClick:function(){return n.open(e.link,e.name)},getUpdatedNumLikesFromApiAfterUserAction:function(e,t){return i.updateCardLikes(e,t).then((function(e){return{numLikes:e.likes.length}})).catch(ee)},handleDeleteCard:function(e){r.setInputValues({id:e}),r.open()}}).generateNewCardElement()}W=new _(".image-popup__image",U),M=new C({nameOfUserSelector:".profile__name",descriptionAboutUserSelector:".profile__self-description",avatarForUserSelector:".profile__avatar",avatarOverlaySelector:".profile__avatar-overlay"},(function(){return Z.open()})),H=new S({headers:{authorization:"f9c51bc0-ecec-42b1-bdb4-bcfabdba3e4f"}}),J=new c("confirmationPromptForm",{handleFormSubmit:function(e,t){var n=t.disableSubmitBtn;e.preventDefault(),n(),function(e,t){var n=e.getInputValues().id;t.deleteCard(n).then((function(){return $.delete(n)})).catch(ee).finally((function(){return e.close()}))}(J,H)}},x),z=new P({renderer:function(e){var t=te(e,{popupWithConfirmationPromptForm:J,api:H,popupWithImage:W});z.addItem(t)}},".locations__collection"),G=new t(q,document.forms.profileEditForm),K=new t(q,document.forms.locationCreateForm),Q=new t(q,document.forms.profileImgChangeForm),X=new c("profileEditForm",{handleFormSubmit:function(e,t){var n=t.disableSubmitBtn;e.preventDefault(),n(),function(e,t,n){var r=e.getInputValues(),i=r.profileName,o=r.aboutMe,a=e.getSubmitBtnText();e.setSubmitBtnText(N),t.updateUserProfile(i,o).then((function(e){var t=e.name,r=e.about;n.setUserInfo({name:t,description:r})})).catch(ee).finally((function(){e.setSubmitBtnText(a),e.close()}))}(X,H,M)},performActionPriorToFormOpening:function(){G.showNoErrorsButDisableSubmitBtnWhenHasAnError()}},x),Y=new c("locationCreateForm",{handleFormSubmit:function(e,t){var n=t.disableSubmitBtn;e.preventDefault(),n(),function(e){var t=e.popupWithCardCreationForm,n=e.api,r=e.popupWithImage,i=e.popupWithConfirmationPromptForm,o=e.cardListSection,a=t.getInputValues(),l=a.locationTitle,s=a.imageLink,u=t.getSubmitBtnText();t.setSubmitBtnText(N),n.createCard(l,s).then((function(e){var t=te({name:e.name,link:e.link,id:e._id},{popupWithImage:r,popupWithConfirmationPromptForm:i,api:n});o.addItem(t)})).catch(ee).finally((function(){t.setSubmitBtnText(u),t.close()}))}({popupWithCardCreationForm:Y,api:H,popupWithImage:W,popupWithConfirmationPromptForm:J,cardListSection:z})},performActionPriorToFormOpening:function(){K.showNoErrorsButDisableSubmitBtnWhenHasAnError()}},x),Z=new c("profileImgChangeForm",{handleFormSubmit:function(e,t){var n=t.disableSubmitBtn;e.preventDefault(),n(),function(e,t,n){var r=e.getInputValues().avatarLink,i=e.getSubmitBtnText();e.setSubmitBtnText(N),t.updateUserAvatar(r).then((function(e){var t=e.avatar;return n.setUserInfo({avatarLink:t})})).catch(ee).finally((function(){e.setSubmitBtnText(i),e.close()}))}(Z,H,M)},performActionPriorToFormOpening:function(){Q.showNoErrorsButDisableSubmitBtnWhenHasAnError()}},x),H.getUserProfile().then((function(e){var t=e._id,n=e.name,r=e.about,i=e.avatar;return M.setUserInfo({id:t,name:n,description:r,avatarLink:i}),H.getInitialCards()})).then((function(e){return function(e,t,n){var r=t.getUserInfo().id,i=e.map((function(e){var t=e.name,n=e.link,i=e.likes,o=e._id,a=e.owner,l=i.some((function(e){return e._id===r})),s=a._id===r;return{name:t,link:n,initialNumLikes:i.length,id:o,isLiked:l,isOwner:s}}));n.renderItems(i)}(e,M,z)})).catch(ee),I.addEventListener("click",(function(){var e=M.getUserInfo(),t=e.name,n=e.description;X.setInputValues({profileName:t,aboutMe:n}),X.open()})),j.addEventListener("click",(function(){return Y.open()})),M.setEventListeners(),W.setEventListeners(),Y.setEventListeners(),X.setEventListeners(),J.setEventListeners(),Z.setEventListeners(),G.enableValidation(),K.enableValidation(),Q.enableValidation()})();